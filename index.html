<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <link rel="stylesheet" href="https://unpkg.com/lenis@1.1.14/dist/lenis.css">
   <link rel="stylesheet" href="style.css">
</head>
<body">
   <div class="w-full font-['Neue'] bg-zinc-900">
      <div class="parent relative w-full h-[5000vh]">
         <div class="w-full h-screen sticky top-0 left-0 overflow-x-hidden">
            <canvas class="w-full h-screen" id="canvas"></canvas>
            <div class="absolute animate1 z-[2] text-white bottom-10 w-1/2 left-10">
               <h1 class="leading-20 font-[100] text-3xl font-['Neue']">
                  &copy; 2024 DOZE STD
               </h1>
               <h1 class="text-3xl font-[500] font-['Paris']">SHAPING BRANDS → CRAFTING MOTION →</h1>
            </div>
            <div class="absolute animate2 flex z-[2] text-white bottom-10 w-1/2 right-10 text-right opacity-0">
               <h1 class="leading-20 font-[100] font-['Neue'] uppercase text-6xl">Transforming Vision</h1>
               <h1 class="text-xl font-['Gilroy'] w-1/2">Building identity and inspiring action. Sculpting digital experience resonate.</h1>
            </div>
            <div class="absolute animate3 z-[2] text-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center opacity-0">
               <h1 class="leading-20 font-[100] font-['Neue'] uppercase text-6xl">Elevating Aesthetics</h1>
               <h1 class="text-xl font-['Gilroy']">Crafting solutions and exploring new horizons. Evolving narratives and elevating aesthetics in every projects.</h1>
            </div>
            <div class="w-1/3 panel translate-x-full h-screen bg-white absolute right-0 top-0 z-[2] p-10">
               <h3 class="panelelem text-xl font-['Neue'] font-[100]">2024 Doze.std</h3>
               <p class="panelelem mt-10 font-['Neue'] text-xl">Sculpting Digital Transforming vision into digital realities. Weaving stories that captivate and innovate. Exploring new possibilities with a focus on narratives evolution. Crafting solutions that engage and elevate.</p>
               <button class="panelelem border-[1px] px-3 py-2 font-['Paris'] border-[#555] font-[500] mt-6">Get Reviews →</button>

               <div class="panelelem absolute bottom-10">
                  <h3 class="text-xl font-['Neue']">Innovating Design</h3>
                  <p class="text-sm font-['Neue'] mt-3">Connecting ideas to foster creativity. Designing impactful experience that resonate. Feel free to mix and match these sections to suit your website's design needs!</p>
                  <button class="bg-black text-white px-7 text-sm mt-4 py-4 font-[500] font-['Paris'] capitalize">experience</button>
               </div>
            </div>
            <div class="absolute z-[2] panelism font-['Neue'] text-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-6xl tracking-tighter opacity-0">
               &copy; Panelism <span class="line w-10 h-1 bg-white inline-block"></span> 2048</div>
         </div>
      </div>
      <div class="w-full py-32 px-10 bg-white">
         <h1 class="font-['Neue'] text-8xl tracking-tighter">&reg; Our Recent Works.</h1>
         <div class="headings w-1/2 p-3 flex flex-col gap-10 mt-32">
            <h3 class="text-7xl ">Zone Blerp</h3>
            <h3 class="text-7xl ">Flibble Sprock</h3>
            <h3 class="text-7xl ">Wibble Zurf</h3>
            <h3 class="text-7xl ">Quarn Blap</h3>
            <h3 class="text-7xl ">Snarp Woogle</h3>
            <h3 class="text-7xl ">Frizzle Bump</h3>
            <h3 class="text-7xl ">Plonk Zorp</h3>
            <h3 class="text-7xl ">Slibber Klop</h3>
            <h3 class="text-7xl ">Glonk Dribble</h3>
            <h3 class="text-7xl ">Twizzle Blurb</h3>
            <h3 class="text-7xl ">Skribble Zink</h3>
            <h3 class="text-7xl ">Quibble Plop</h3>
            <h3 class="text-7xl ">Blizzy Nerp</h3>
            <h3 class="text-7xl ">Fuzzle Droop</h3>
            <h3 class="text-7xl ">Krinkle Splap</h3>
         </div>
      </div>
   </div>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" integrity="sha512-onMTRKJBKz8M1TnqqDuGBlowlH0ohFzMXYRNebz+yOcc5TQr/zAKsthzhuv0hiyUKEiQEQXEynnXCvNTOk50dg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="https://unpkg.com/lenis@1.1.14/dist/lenis.min.js"></script>
    <script>
      const canvas = document.querySelector("canvas");
      const context = canvas.getContext("2d");
      const frame = {
            currenIndex: 0,
            maxIndex: 1345,
         }

         const images = [];
         let imagesLoaded = 0;
         function preloadImages() {
            for (var i = 1; i <= frame.maxIndex; i++) {
               const imageUrl = `./frame/frame_${i.toString().padStart(4, "0")}.jpeg`;
               const img = new Image();
               img.src = imageUrl;

               img.onload = function () {
                  imagesLoaded++;
                  if (imagesLoaded === frame.maxIndex) {
                     loadImage(frame.currenIndex);
                     startAnimation();
                  }
               }
               images.push(img);
            }
         }

         function loadImage(index) {
            if(index>=0 && index<=frame.maxIndex){
               const img = images[index];
               canvas.width = window.innerWidth;
               canvas.height = window.innerHeight;

               const scaleX = canvas.width / img.width;
               const scaleY = canvas.height / img.height;
               const scale = Math.max(scaleX, scaleY);

               const newWidth = img.width * scale;
               const newHeight = img.height * scale;

               const offsetX = (canvas.width - newWidth) / 2;
               const offsetY = (canvas.height - newHeight) / 2;

               context.clearRect(0, 0, canvas.width, canvas.height);
               context.imageSmoothingEnabled = true;
               context.imageSmoothingQuality = "High";
               context.drawImage(img, offsetX, offsetY, newWidth, newHeight);

               frame.currenIndex = index;
            }
         }
            
            function startAnimation(){
               var tl = gsap.timeline({
                  scrollTrigger: {
                     trigger: "scroll",
                     start: "top top",
                     scrub: 5,
                     end: "bottom bottom",
                  }
               })

               function updateFrame(index){
                 return {
                     currentIndex: index,
                     ease: "linear",
                        onUpdate: function() {
                           loadImage(Math.floor(frame.currentIndex));
                        }
                  }
               }

               tl
               .to(frame, updateFrame(80), "first")
               .to(".animate1", {opacity: 0, ease: "linear"}, "first")

               .to(frame, updateFrame(160), "second")
               .to(".animate2", {opacity: 1, ease: "linear"}, "second")

               .to(frame, updateFrame(240), "third")
               .to(".animate2", {opacity: 1, ease: "linear"}, "third")

               .to(frame, updateFrame(320), "fourth")
               .to(".animate2", { opacity: 0, ease: "linear" }, "fourth")

               .to(frame, updateFrame(400), "fifth")
               .to(".animate3", { opacity: 1, ease: "linear" }, "fifth")

               .to(frame, updateFrame(480), "sixth")
               .to(".animate3", { opacity: 1, ease: "linear" }, "sixth")

               .to(frame, updateFrame(560), "seventh")
               .to(".animate3", { opacity: 0, ease: "linear" }, "seventh")

               .to(frame, updateFrame(640), "eighth")
               .to(".panel", { x: "0%", ease: "expo" }, "eighth")

               .to(frame, updateFrame(720), "ninth")
               .to(".panel", { x: "0%", ease: "expo" }, "ninth")

               .to(frame, updateFrame(800), "tenth")
               .to(".panel", { opacity: 0, ease: "linear" }, "tenth")

               .to(frame, updateFrame(880), "eleventh")
               .to("canvas", { scale: .5, ease: "linear" }, "eleventh")

               .to(frame, updateFrame(960), "twelve")
               .to(".panelism", {opacity: 1, ease: "expo" }, "twelve")

               .to(frame, updateFrame(1040), "twelve")
               .to(".panelism span", { width: 200, ease: "expo" }, "twelve")

               .to(frame, updateFrame(1120), "thirteen")
               .to("canvas", { scale: 1, ease: "linear" }, "thirteen")

               .to(frame, updateFrame(1200), "fourteen")
               .to(".panelism", { scale: 2, ease: "circ" }, "fourteen")

               .to(frame, updateFrame(1344), "fifteen")
               .to(".panelism", { scale: 2, ease: "circ" }, "fifteen")
            }

               const lenis = new Lenis();

               function raf(time) {
                  lenis.raf(time);
                  requestAnimationFrame(raf);
               }

               requestAnimationFrame(raf);


         window.addEventListener("resize", function(){
            loadImage(Math.floor(frames.currentIndex));
         })

         preloadImages();

         document.querySelectorAll(".headings h3")
         .forEach(function(elem){
            gsap.from(elem, {
               scrollTrigger: {
                  trigger: elem,
                  start: "top 90%",
                  end: "bottom 20%",
                  scrub: 2,
               },
               opacity: .3,
            })
         })
    </script>
</body>
</html>